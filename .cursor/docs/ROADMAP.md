### **Final Phased Development Plan**

_(React + Vite UI in a dedicated Electron window; all Node/back-end code lives inside Electron’s main process or preload layer)_

| Phase                                           | Goal & Deliverables (one-sentence)                                                                                    | Key Tasks (ordered)                                                                                                                                                                                                                                            | Dependencies / Risks                                             | Effort\*<br>(Skill)                             | Acceptance Criteria                                                                                                                    |                                                                |
| ----------------------------------------------- | --------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------- | ----------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------- |
| **0 — Project Foundation**                      | GitHub repo, code-style tooling, and CI baselines set.                                                                | 1. Create repo & default branch.<br>2. Add EditorConfig, ESLint/Prettier, Husky.<br>3. GitHub Actions for lint & unit-test on Win/macOS.<br>4. \`setup.(sh                                                                                                     | ps1)\` installs Node 18+ & pnpm.                                 | Node ≥ 18 required on dev/CI; runner flakiness. | **S** (DevOps)                                                                                                                         | Fresh clone → `pnpm install && pnpm test` passes on both OSes. |
| **1 — Runnable Skeleton** **_(critical path)_** | Launch Electron window (task-bar/dock icon) that loads live Vite React UI in dev and bundled files in prod.           | 1. `pnpm create vite` → React template in `/ui`.<br>2. Set up Electron main process + preload.<br>3. Dev script: start Vite + Electron via `concurrently`.<br>4. Prod build script: `vite build` & `electron-builder`.<br>5. Top-bar **File → Settings** stub. | Coordinate Vite dev URL vs `file://` prod path; window controls. | **M** (Full-stack JS)                           | `pnpm dev` opens an Electron window with blank page; icon appears in task-bar/dock; `pnpm build && pnpm start:prod` loads packaged UI. |                                                                |
| **2 — Single-Model Chat + Cost Display**        | Send prompt to GPT-4o; show tokens & ±1 % cost.                                                                       | 1. Add provider module (OpenAI SDK) in main process.<br>2. Integrate `@dqbd/tiktoken` for token counting.<br>3. Hard-code GPT-4o price map.<br>4. React chat component shows messages, tokens, cost.                                                           | User enters API key in Settings; handle API errors.              | **M** (Backend + UI)                            | User prompt → assistant reply rendered; tokens & cost accurate ±1 %.                                                                   |                                                                |
| **3 — Multi-Model Toggle + Diff Viewer**        | Compare outputs from ≥ 2 cloud models side-by-side with diff.                                                         | 1. Abstract provider interface (OpenAI, Claude).<br>2. Extend price map JSON.<br>3. Build split-pane diff (Monaco).<br>4. Save session state in memory.                                                                                                        | SDK response shape differences; multiple API keys.               | **L** (Front-end + Node)                        | Select two models → click **Send** → diff pane shows both outputs.                                                                     |                                                                |
| **4 — Local Model Adapter**                     | Let user run prompts through Ollama/llama.cpp if installed manually.                                                  | 1. Detect Ollama CLI; show “Not installed” notice.<br>2. Spawn subprocess & stream output.<br>3. Add “Local” checkbox in model picker.<br>4. Treat cost as \$0.                                                                                                | User environment variance (ARM/x64, RAM).                        | **L** (Systems)                                 | After manual model install, local checkbox returns answer ≤ 30 s on 8 GB machine.                                                      |                                                                |
| **5 — Prompt Coach v1**                         | Score prompt (0-100) & “Improve” diff.                                                                                | 1. Heuristic scorer.<br>2. Few-shot OpenAI rewrite call.<br>3. Diff viewer between prompts.<br>4. Store score per prompt in session.                                                                                                                           | Subjective scoring; toggle to hide.                              | **M** (Prompt Eng.)                             | Clicking **Improve** shows revised prompt & color-coded diff ≥ 90 % useful.                                                            |                                                                |
| **6 — Batch Mode**                              | CSV upload executes prompts in parallel and exports cost report.                                                      | 1. Parse CSV in renderer → queue jobs via main process.<br>2. Throttle per provider; worker pool.<br>3. Progress bar; downloadable JSON/CSV summary.<br>4. Persist run in `userData/history/`.                                                                 | API rate limits; memory for big CSVs.                            | **L–XL** (Backend)                              | 1 k-row CSV finishes < 10 min; subtotal cost matches sum ±1 %.                                                                         |                                                                |
| **7 — Daily Pricing Sync**                      | Automatic model-pricing JSON refresh via GitHub Action.                                                               | 1. Scrape official pages (cheerio).<br>2. Push updated file on cron.<br>3. Fallback manual override in Settings.                                                                                                                                               | Provider page markup changes silently.                           | **M** (Scripting)                               | File refreshes daily; app uses cached prices when offline.                                                                             |                                                                |
| **8 — Packaging & Auto-Update**                 | Signed installers on GitHub Releases for Win (.exe) & Mac (.dmg) with desktop shortcut, updater, and crash‐reporting. | 1. Configure `electron-builder` (nsis + dmg).<br>2. macOS notarisation + Windows EV cert (start paperwork early).<br>3. GitHub Release workflow to build & upload artifacts.<br>4. Wire `electron-updater` to public repo.                                     | Cert cost & lead-time; SmartScreen warnings.                     | **L** (DevOps)                                  | Download installer → shortcut created; “Check for Updates” downloads new version & restarts quietly.                                   |                                                                |

\*Effort legend: **S** ≤ 1 day, **M** 2-3 days, **L** ≈ 1 week, **XL** > 2 weeks (solo dev).

---

#### **Critical-Path Items**

1. **Phase 1 runnable skeleton** – foundation for every feature.
2. **Provider abstraction (Phase 3)** – required before batch mode, prompt coach, pricing sync.
3. **Local model adapter (Phase 4)** – differentiates product; may affect marketing timeline.
4. **Packaging & auto-update (Phase 8)** – gates public release due to cert delays.

#### **Resource Gaps & Mitigations**

| Gap                                   | Mitigation                                                                         |
| ------------------------------------- | ---------------------------------------------------------------------------------- |
| **Electron + React full-stack depth** | Allocate 1-2 study days; reuse `electron-vite` boilerplate.                        |
| **Notarisation / EV certs**           | Budget for certificates; begin Apple dev account & EV validation during Phase 4–5. |
| **Solo-dev bandwidth**                | Stick to phase order, weekly self-checkpoint, defer nice-to-haves.                 |

---

### ✅ Ready to Build
